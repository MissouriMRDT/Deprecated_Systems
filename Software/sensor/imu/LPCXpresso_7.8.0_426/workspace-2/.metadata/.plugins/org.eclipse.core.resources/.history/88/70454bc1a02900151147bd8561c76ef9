#ifndef __I2C_H_
#define __I2C_H_

#include <stdint.h>
#include <stdlib.h>
#include <string.h>
#include "board.h"

#define BUFFER_LENGTH 32
#define I2C_FASTPLUS_BIT     0
#define SPEED_100KHZ         100000
#define SPEED_400KHZ         400000
static int mode_poll;	// Poll/Interrupt mode flag

class Wire {
public:
	// Constructor
	Wire();

	// Init Wire object with default parameters
	void init();

	// Set transmitting, set address, reset buffer index and length
	void beginTransmission(uint8_t);

	// Reset transmitting, reset buffer index and length, send stop if necessary
	uint8_t endTransmission(uint8_t);

	// Load data in buffer, inc buffer index/length
	size_t write(uint8_t);

	// Fill Rx buffer with result of requestFrom
	int read(void);

	// Return true if not receiving data
	int isAvailable(void);

	// Set mode to polling/interrupt
	void i2cSetMode(I2C_ID_T, int);
};

extern Wire i2c;

#endif /* __I2C_H__ */
