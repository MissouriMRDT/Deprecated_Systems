/*
 * roveStructTransfer.h
 *
 *  Created on: Mar 7, 2015
 *      Author: Connor Walsh
 */

#pragma once

#ifndef ROVESTRUCTTRANSFER_H_
#define ROVESTRUCTTRANSFER_H_

enum peripheral_devices{motor_controller, bms, robotic_arm, tcp_cmd, drill, gripper, science_payload, gps, lighting_board, camera, power_board, test};

enum peripheral_struct_ids{
		blank_id_zero = 0,
		mobo_identify_req = 1,
		dev_identify_reply = 2,
		mobo_begin_op_req,
		dev_begin_op_reply,
		mobo_telem_req,
		dev_command_reply = 6,
		blank_id_seven,
		dev_robo_arm_command,
		dev_gripper_command,
		dev_drill_command
};

// XOR checksum calculation for a struct
uint8_t calcCheckSum(const void* my_struct, uint8_t size);

// Pre: buffer must be of size(my_struct) + 4 bytes (start bytes, size, and checksum)
void buildSerialStructMessage(void* my_struct, enum peripheral_struct_ids struct_id, char* buffer);

// Pre: is a buffer containing a message in easyTransfer form
bool parseStructSerial(void* out_struct, enum peripheral_devices device, char* buffer);

#endif /* ROVESTRUCTTRANSFER_H_ */
